<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"  lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>蚊子的BUG合集</title>
    <link rel="Shortcut Icon" href="../static/img/icon.png" th:href="@{/img/icon.png}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    <link rel="stylesheet" href="../static/css/typo.css" th:href="@{/css/typo.css}">
    <link rel="stylesheet" href="../static/css/animate.css" th:href="@{/css/animate.css}">
    <link rel="stylesheet" href="../static/lib/prism/prism.css" th:href="@{/lib/prism/prism.css}">
    <link rel="stylesheet" href="../static/lib/tocbot/tocbot.css" th:href="@{/lib/tocbot/tocbot.css}">
    <link rel="stylesheet" href="../static/css/me.css" th:href="@{/css/me.css}">
</head>
<body>

<!--    <div class="Welcome" align="left">-->
<!--        &lt;!&ndash; 居中 &ndash;&gt;-->
<!--        <div style="/*background-color: rgb(0,255,0);*/width: 500px;height: 200px;color: rgb(255,255,255);font-family: FangSong " align="center">-->
<!--            Hi!  Welcome-->
<!--            <div style="font-size: 25px">1111111111</div>-->
<!--        </div>-->
<!--    </div>-->

    <!-- 导航 -->
    <nav th:replace="_fragments :: menu(1)" class="ui inverted attached segment m-padded-tb-mini m-shadow-small">
        <div class="ui container">
            <div class="ui inverted secondary stackable menu">
                <h2 class="ui teal header item">Blog</h2>
                <a href="#" class="m-item item m-mobile-hide"><i class="home icon"></i> 首页</a>
                <a href="#" class="m-item item m-mobile-hide"><i class="idea icon"></i> 分类</a>
                <a href="#" class="m-item item m-mobile-hide"><i class="tags icon"></i> 标签</a>
                <a href="#" class="m-item item m-mobile-hide"><i class="clone icon"></i> 归档</a>
                <a href="#" class="m-item item m-mobile-hide"><i class="info icon"></i> 关于我</a>
                <div class="right m-item item m-mobile-hide">
<!--                    <div class="ui icon inverted transparent input">-->
<!--                        <input type="text" placeholder="Search.....">-->
<!--                        <i class="search link icon"></i>-->
<!--                    </div>-->

                </div>
            </div>
        </div>
        <a href="#" class="ui menu toggle black icon button m-right-top m-mobile-show">
            <i class="sidebar icon">

            </i>
        </a>
    </nav>

    <!-- 中间内容 -->
    <div id="waypoint" class="m-container-small m-padded-tb-big animated fadeIn">
        <div class="ui container">
            <!--  头部内容  -->
            <div class="ui top attached segment">
                <div class="ui horizontal link list">
                    <div class="item">
                        <img src="https://picsum.photos/id/1004/100/100" th:src="@{${blog.user.avatar}}" alt="" class="ui avatar image">
                        <div class="content"><a href="#" class="header" th:text="${blog.user.nickName}">姓名</a></div>
                    </div>
                    <div class="item">
                        <i class="calendar icon"></i><span th:text="${#dates.format(blog.updateTime,'yyyy-MM-dd')}">2020-10-22</span>
                    </div>
                    <div class="item">
                        <i class="eye icon"></i><span th:text="${blog.views}">123</span>
                    </div>
                </div>
            </div>
            <!--  图片区域  -->
            <div class="ui attached segment">
                <img src="https://picsum.photos/id/166/1920/1080" th:src="@{${blog.firstPicture}}" alt="" class="ui fluid rounded image">
            </div>
            <!--  内容区域  -->
            <div class="ui attached padded segment">
                <div class="ui right aligned basic segment">
                    <div class="ui orange basic label" th:text="${blog.flag}">原创</div>
                </div>

                <h2 class="ui center aligned header" th:text="${blog.title}">关于。。。。154</h2>
                <br>

                <!--主要内容-->
                <div id="content" class="typo typo-selection js-toc-content m-padded-lr-responsive m-padded-tb-large" th:utext="${blog.content}">
                    <p>人之一生，但夕祸福，最终还不是归于一堆黄土吗?也许你做不了官，但你肯定会做人;也许你缺少钱，但你肯定很富足。</p>
                    <h4 id="1"> dsfsadfsadf</h4>
                    <p>人之命运，命里一尺，难求一丈，中国的老俗话颇有道理，没有必要做无谓的抗争，老天爷早为你安排好了一切，该啥样就啥样了。</p>
                    <p>人之婚姻，破锅自有破锅盖，啥人自有啥人爱，当初坚定的要嫁他(娶她)，就一定有嫁他(娶她)的理由。现在嘛，闭一只眼，对他(她)的不能容忍也要视而不见，睁一只眼，看看他(她)身上的闪光点，人无完人嘛。</p>
                    <p>人之家庭，几个不和谐的音符被巧妙的凑到一块，没准能奏出异常优美的乐章，那看你怎么欣赏了，反正演奏者是乐在其中。</p>　　
                    <p>人之朋友，想离开你的，不必强求，求回来的也许是一个小人，真正交心的，也不用天天打电话联系，只要对方有事，一声招呼随叫随到，两肋插刀就OK了。</p>　　
                    <p>人之幸福，一直以为幸福在远方，在可以追逐的未来。后来才发现，那些拥抱过的人，握过的手、唱过的歌、流过的泪、爱过的人、所谓的曾经，就是幸福。在无数的夜里，说过的话、打过的电话，看过的电影、流过的眼泪……看见的或看不见的感动，我们都曾经有过，然后在时间的穿梭中，一切成为了永恒!</p>　　
                    <p>人之金钱，身外之物，撑不着饿不死就得，大不了他吃好的，我吃咸菜，一样管饱，无非是他穿好的，我穿差的，照样暖和。</p>　　
                    <p>人之地位，那东西跟我根本扯不上，他作他的达官贵人，我作我的贫民百姓，像小品里说的：最终的归宿不都是那个小匣子吗。没有什么高低贵贱之分，人人为我， 我为人人，只要合法，能干什么就干什么，口袋没钱不丢人，死要面子活受罪的事千万别干。</p>　　
                    <p>人之孩子，是上帝赐给你的一张存单，当然不是你的帐户，密码也未知，你就只管往里存，什么时候可以取出来享受，那得看它的主人了，别指望，就当奉献了。</p>
                    <p>人之父母，他们是为我立账户的人，虽然他们没想要收回成本，但现在也该是我们加倍奉还的时候了，也许直到他们离我远去，都还是还不清呀。</p>
                    <p>人之世事，但也觉得轻松了，豁达了，开朗了，如果事事和人争，天天和人比，那不是纯粹和自己过不去，折磨自己吗?</p>
                    <p>人之自我，周围的人也就都心平气和了。回头看看我开车还有骑车的哪，我骑车还有走路的哪，我走路还有拄拐的哪，我拄拐还有没腿的哪，我没腿还有没命的哪……。</p>
                    <p>人之心境，也体味全然不同的人生。同样的境遇，有的人仿佛置身天堂，有的人感觉如处地狱。人生犹如一丛玫瑰，没有绝对的美丑，鲜花与芒刺，就看我们关注的是什么。心中充满感恩，温暖时时相伴，念念宽恕别人，和气自然相随。</p>
                    <p>人之相遇，假如人生不曾相遇，我还是那个我，偶尔做做梦，然后，开始日复一日的奔波，淹没在这喧嚣的城市里。我不会了解，这个世界还有这样的一个你，让人回味，令我心醉。假如人生不曾相遇，我不会相信，有一种人一认识就觉得温馨，有一种人可以百看不厌。</p>
                    <p>人之努力，不要抱怨你没有一个好爸爸，不要抱怨你的工作差，不要抱怨怀才不遇无人赏识。现实有太多的不如意，就算生活给你的是垃圾，你同样能把垃圾踩在脚底下登上世界之巅。这个世界只在乎你是否在到达了一定的高度，而不在乎你是踩在巨人的肩膀上上去的，还是踩在垃圾上上去的。</p>　　
                </div>

                <!--  标签  -->
                <div class="m-padded-lr-responsive">
                    <div class="ui basic teal left pointing label" th:each="tag : ${blog.tags}" th:text="${tag.name}">方法</div>
                </div>

                <!--  赞赏  -->
                <div th:if="${blog.appreciation}">
                    <div class="ui center aligned basic segment">
                        <button id="payButton" class="ui orange basic circular button">赞赏</button>
                    </div>
                    <div class="ui payQR flowing popup transition hidden">
                        <div class="ui orange basic label">
                            <div class="ui images" style="font-size: inherit !important;">
                                <div class="image">
                                    <img src="../static/img/ewm_zfb.jpg" th:src="@{/img/ewm_zfb.jpg}" alt="" class="ui rounded bordered image" style="width: 120px">
                                    <div>支付宝</div>
                                </div>
                                <div class="image">
                                    <img src="../static/img/ewm_wx.jpg" th:src="@{/img/ewm_wx.jpg}" alt="" class="ui rounded bordered image" style="width: 120px">
                                    <div>微信</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--  博客信息  -->
            <div class="ui attached positive message" th:if="${blog.shareStatement}">
                <div class="ui middle aligned grid">
                    <!--  信息  -->
                    <div class="eleven wide column">
                        <ui class="list">
                            <li>作者: <span th:text="${blog.user.nickName}">作者</span><a href="#" th:href="@{/about}" target="_blank">(联系作者)</a></li>
                            <li>发表时间: <span th:text="${#dates.format(blog.updateTime, 'yyyy-MM-dd HH:mm')}">2020-10-22</span></li>
                            <li>版权声明: </li>
                            <li>转载:</li>
                        </ui>
                    </div>
                    <!--  二维码  -->
                    <div class="five wide column">
                        <img src="../static/img/ewm_wx.jpg" th:src="@{/img/ewm_wx.jpg}" alt="" class="ui right floated rounded boedered image" style="width: 120px">
                    </div>
                </div>
            </div>
            <!--  留言区  -->
            <div class="ui bottom attached segment" th:if="${blog.commentabled}">
                <!--  留言区域列表  -->
                <div  id="comment-container"  class="ui teal segment">
                    <div th:fragment="commentList">
                        <div class="ui threaded comments" style="max-width: 100%;">
                            <h3 class="ui dividing header">评论</h3>
                            <div class="comment" th:each="comment : ${comments}">
                                <a class="avatar">
                                    <img src="https://picsum.photos/id/169/200/200" th:src="@{${comment.avatar}}">
                                </a>
                                <div class="content">
                                    <a class="author" >
                                        <span th:text="${comment.nickName}">Matt</span>
                                        <div class="ui mini basic teal left pointing label m-padded-mini" th:if="${comment.adminComment}">博主</div>
                                    </a>
                                    <div class="metadata">
                                        <span class="date" th:text="${#dates.format(comment.createTime, 'yyyy-MM-dd HH:mm')}">Today at 5:42PM</span>
                                    </div>
                                    <div class="text" th:text="${comment.content}">
                                        How artistic!
                                    </div>
                                    <div class="actions">
                                        <a class="reply" data-commentid="1" data-commentnickname="Matt" th:attr="data-commentid=${comment.id},data-commentnickname=${comment.nickName}" onclick="reply(this)">回复</a>
                                    </div>
                                </div>
                                <!--子评论-->
                                <div class="comments" th:if="${#arrays.length(comment.replyComment)}>0">
                                    <div class="comment" th:each="reply : ${comment.replyComment}">
                                        <a class="avatar">
                                            <img src="https://picsum.photos/id/169/200/200" th:src="@{${reply.avatar}}">
                                        </a>
                                        <div class="content">
                                            <a class="author" >
                                                <span th:text="${reply.nickName}">Matt</span>
                                                <div class="ui mini basic teal left pointing label m-padded-mini" th:if="${reply.adminComment}">博主</div>
                                                &nbsp;
                                                <span th:text="|@ ${reply.parentComment.nickName}|" class="m-teal">@ 姓名</span>
                                            </a>
                                            <div class="metadata">
                                                <span class="date" th:text="${#dates.format(reply.createTime, 'yyyy-MM-dd HH:mm')}">Today at 5:42PM</span>
                                            </div>
                                            <div class="text" th:text="${reply.content}">
                                                How artistic!
                                            </div>
                                            <div class="actions">
                                                <a class="reply" data-commentid="1" data-commentnickname="Matt" th:attr="data-commentid=${reply.id},data-commentnickname=${reply.nickName}" onclick="reply(this)">回复</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!--/*-->
                            <div class="comment">
                                <a class="avatar">
                                    <img src="https://picsum.photos/id/169/200/200">
                                </a>
                                <div class="content">
                                    <a class="author">Elliot Fu</a>
                                    <div class="metadata">
                                        <span class="date">Yesterday at 12:30AM</span>
                                    </div>
                                    <div class="text">
                                        <p>This has been very useful for my research. Thanks as well!</p>
                                    </div>
                                    <div class="actions">
                                        <a class="reply">回复</a>
                                    </div>
                                </div>
                                <div class="comments">
                                    <div class="comment">
                                        <a class="avatar">
                                            <img src="https://picsum.photos/id/169/200/200">
                                        </a>
                                        <div class="content">
                                            <a class="author">Jenny Hess</a>
                                            <div class="metadata">
                                                <span class="date">Just now</span>
                                            </div>
                                            <div class="text">
                                                Elliot you are always so right :)
                                            </div>
                                            <div class="actions">
                                                <a class="reply">回复</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="comment">
                                <a class="avatar">
                                    <img src="https://picsum.photos/id/169/200/200">
                                </a>
                                <div class="content">
                                    <a class="author">Joe Henderson</a>
                                    <div class="metadata">
                                        <span class="date">5 days ago</span>
                                    </div>
                                    <div class="text">
                                        Dude, this is awesome. Thanks so much
                                    </div>
                                    <div class="actions">
                                        <a class="reply">回复</a>
                                    </div>
                                </div>
                            </div>
                            <!--*/-->

                        </div>
                    </div>

                </div>
                <!--  提交留言区  -->
                <div id="comment-form" class="ui form">
                    <input type="hidden" name="blog.id" th:value="${blog.id}">
                    <input type="hidden" name="parentComment.id" value="-1">
                    <!--  评论编辑区  -->
                    <div class="field">
                        <textarea name="content" placeholder="请输入评论信息..."></textarea>
                    </div>
                    <div class="fields">
                        <div class="field m-mobile-wide m-margin-bottom-small">
                            <div class="ui left icon input">
                                <i class="user icon"></i>
                                <input type="text" name="nickname" placeholder="姓名" th:value="${session.user}!=null ? ${session.user.nickName}">
                            </div>
                        </div>
                        <div class="field m-mobile-wide m-margin-bottom-small">
                            <div class="ui left icon input">
                                <i class="mail icon"></i>
                                <input type="text" name="email" placeholder="邮箱" th:value="${session.user}!=null ? ${session.user.email}">
                            </div>
                        </div>
                        <div class="field m-mobile-wide m-margin-bottom-small">
                            <button id="commentPost-btn" type="button" class="ui teal button m-mobile-wide"><i class="edit icon"></i>发布</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="toolbar" class="m-padded m-fixed m-fight-buttom" style="display: none">
        <div class="ui vertical icon buttons">
            <button type="button" class="ui toc teal button">目录</button>
            <a href="#comment-container" class="ui teal button">留言</a>
            <button class="ui wechat icon teal button"><i class="weixin icon"></i></button>
            <div id="toTop-button" href="#" class="ui icon button"><i class="chevron up icon"></i></div>
        </div>
    </div>

    <div class="ui toc-container flowing popup transition hidden" style="width: 250px !important;">
        <ol class="js-toc">

        </ol>
    </div>

    <!--  二维码图片  -->
    <div id="qrcode" class="ui wechatQR flowing popup transition hidden" style="width: 130px !important;"></div>

    <br>
    <br>
    <br>
    <!--    底部    -->
    <div class="ui segment write_box_small">
        <footer th:replace="_fragments :: footer" class="ui inverted vertical segment m-padded-tb-massive">
        <div class="ui center aligned container">
            <div class="ui inverted divided stackable grid">
                <div class="three wide column">
                    <div class="ui inverted link list">
                        <div class="item">
                            <img src="https://picsum.photos/id/237/200/200" class="ui rounded image" alt="" style="width: 110px">
                        </div>
                    </div>
                </div>
                <div class="three wide column">
                    <h4 class="ui inverted header m-text-thin m-text-spaced">最新博客</h4>
                    <div class="ui inverted link list">
                        <a href="#" class="item">用户故事(User Story)</a>
                        <a href="#" class="item">失败要趁早</a>
                        <a href="#" class="item">关于</a>
                    </div>
                </div>
                <div class="three wide column">
                    <h4 class="ui inverted header m-text-thin m-text-spaced">联系我</h4>
                    <div class="ui inverted link list">
                        <a href="#" class="item">Email：</a>
                        <a href="#" class="item">QQ:</a>
                    </div>
                </div>
                <div class="seven wide column">
                    <h4 class="ui inverted header m-text-thin m-text-spaced">Blog</h4>
                    <p class="m-text-thin m-text-spaced m-opacity-mini">积极的人在每一次忧患中都看到一个机会，而消极的人则在每个机会都看到某种忧患。</p>
                </div>
            </div>
            <div class="ui inverted section divider"></div>
            <p class="m-text-thin m-text-spaced m-opacity-tiny">个人博客</p>
        </div>
    </footer>
    </div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.scrollto@2.1.2/jquery.scrollTo.min.js"></script>
<script src="../static/lib/prism/prism.js" th:src="@{/lib/prism/prism.js}"></script>
<script src="../static/lib/tocbot/tocbot.min.js" th:src="@{/lib/tocbot/tocbot.min.js}"></script>
<script src="../static/lib/qrcode/qrcode.min.js" th:src="@{/lib/qrcode/qrcode.min.js}"></script>
<script src="../static/lib/waypoints/jquery.waypoints.min.js" th:src="@{/lib/waypoints/jquery.waypoints.min.js}"></script>

<!--/*/<th:block th:replace="_fragments :: script">/*/-->
<!--/*/</th:block>/*/-->

<!--  移动端点击三条横线出现标题等  -->
<script th:inline="javascript">
    $('.menu.toggle').click(function (){
        $('.m-item').toggleClass('m-mobile-hide');
    });

    $('#payButton').popup({
        popup : $('.payQR.popup'),
        //on : 'click',
        position: 'bottom center'
    });

    tocbot.init({
       tocSelector: '.js-toc',
       contentSelector: '.js-toc-content',
       headingSelector: 'h1,h2,h3',
    });

    /** 弹出微信二维码 */
    $('.wechat').popup({
        popup : $('.wechatQR.popup'),
        //on : 'click',
        position: 'left center'
    });

    $('.toc.button').popup({
        popup : $('.toc-container.popup'),
        on : 'click',
        position: 'left center'
    });

    /** 生成本博客链接的二维码 */
    var serurl = "127.0.0.1:8080";
    var url = /*[[@{/blog/{id}(id=${blog.id})}]]*/"";
    var qrcode = new QRCode("qrcode",{
        text: serurl + url,
        width: 110,
        height: 110,
        clolrDark: "#ff0000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.M
    });

    /** 平滑滚动到顶部 */
    $('#toTop-button').click(function (){
        $(window).scrollTo(0,500);
    });

    /** 合适的位置隐藏回到顶部按钮 */
    var waypoint = new Waypoint({
        element: document.getElementById('waypoint'),
        handler: function (direction){
            if(direction == 'down'){
                $('#toolbar').show(100);
            }else{
                $('#toolbar').hide(500);
            }
            //console.log('Scrolled to waypoint!' + direction)
        }
    });

    //评论表单验证
    $('.ui.form').form({
        fields: {
            title: {
                identifier: 'content',
                rules: [{
                    type: 'empty',
                    prompt: '请输入评论内容'
                }
                ]
            },
            content: {
                identifier: 'nickname',
                rules: [{
                    type: 'empty',
                    prompt: '请输入你的大名'
                }]
            },
            type: {
                identifier: 'email',
                rules: [{
                    type: 'email',
                    prompt: '请填写正确的邮箱地址'
                }]
            }
        }
    });


    $(function () {
        $("#comment-container").load(/*[[@{/comments/{id}(id=${blog.id})}]]*/"comments/6");
    });


    $('#commentPost-btn').click(function (){
        var boo = $('.ui.form').form('validate form');
        if (boo) {
            //console.log('校验成功');
            postData();
        } else {
            //console.log('校验失败');
        }
    });


    function postData() {
        $("#comment-container").load(/*[[@{/comments}]]*/"",{
            //冒号前为comment内的数据，冒号后为标签的name
            "parentComment.id" : $("[name='parentComment.id']").val(),
            "blog.id" : $("[name='blog.id']").val(),
            "nickName": $("[name='nickname']").val(),
            "email"   : $("[name='email']").val(),
            "content" : $("[name='content']").val()
        },function (responseTxt, statusTxt, xhr) {
//        $(window).scrollTo($('#comment-container'),500);
            clearContent();
        });
    }

    function clearContent() {
        $("[name='content']").val('');
        $("[name='parentComment.id']").val(-1);
        $("[name='content']").attr("placeholder", "请输入评论信息...");
    }


    function reply(obj) {
        var commentId = $(obj).data('commentid');
        var commentNickname = $(obj).data('commentnickname');
        $("[name='content']").attr("placeholder", "@"+commentNickname).focus();
        $("[name='parentComment.id']").val(commentId);
        $(window).scrollTo($('#comment-form'),500);
    }
</script>

</body>
</html>